<script setup>
import { ref, computed, onMounted, onUnmounted } from "vue";
import axios from 'axios';

// Reactive data
const cartItems = ref([]);
const isLoadingCart = ref(false);

// API Configuration
const API_BASE_URL = 'http://localhost:8080';

// Auth helper
const getAuthToken = () => {
  return localStorage.getItem('auth_token');
};

const getUserId = () => {
  const userInfo = localStorage.getItem('user_info');
  if (userInfo) {
    return JSON.parse(userInfo).id;
  }
  return null;
};

// Helper function for color mapping
const getColorHex = (tenMau) => {
  const colorMap = {
    'Trắng': '#ffffff',
    'Đen': '#000000',
    'Đỏ': '#ff0000',
    'Xanh Dương': '#0000ff',
    'Xanh Navy': '#001f3f',
    'Xanh Lá': '#008000',
    'Vàng': '#ffff00',
    'Cam': '#ffa500',
    'Hồng': '#ff69b4',
    'Tím': '#800080',
    'Nâu': '#8b4513',
    'Xám': '#808080',
    'Bạc': '#c0c0c0',
    'Vàng Gold': '#ffd700',
    'Be': '#f5f5dc'
  };
  return colorMap[tenMau] || '#cccccc';
};

// Build full image URL from backend path
const buildImageUrl = (imagePath) => {
  if (!imagePath) return '/placeholder-shoe.png';
  if (imagePath.startsWith('http')) return imagePath;
  return `${API_BASE_URL}${imagePath.startsWith('/') ? '' : '/'}${imagePath}`;
};

// 🛒 Load cart from backend
// 🛒 Load cart from backend - CLEAN VERSION (CHỈ DÙNG JWT)
const loadCartFromBackend = async () => {
  if (isLoadingCart.value) return;

  try {
    isLoadingCart.value = true;
    console.log('🔄 Loading cart from backend...');
    console.log('🔐 Auth token:', getAuthToken() ? 'Present' : 'Missing');

    const response = await axios.get(`${API_BASE_URL}/api/gio-hang/current`, {
      headers: {
        'Authorization': `Bearer ${getAuthToken()}`,
        'Content-Type': 'application/json'
      }
    });

    console.log('✅ Cart loaded from backend:', response.data);

    // Backend trả về array của CartItemResponse
    cartItems.value = response.data.map(item => ({
      id: item.id,
      productDetailId: item.productDetailId,
      name: item.name,
      code: item.code,
      image: buildImageUrl(item.image),
      price: item.price,
      quantity: item.quantity,
      size: item.size,
      color: item.color,
      stock: item.stock,
      points: item.points || 0,
      totalPrice: item.totalPrice
    }));

    console.log('📦 Mapped cart items:', cartItems.value);

  } catch (error) {
    console.error('❌ Error loading cart from backend:', error);

    if (error.response?.status === 401) {
      showNotification('error', 'Phiên đăng nhập hết hạn', 'Vui lòng đăng nhập lại');
      setTimeout(() => {
        window.location.href = '/auth/login';
      }, 2000);
    } else if (error.response?.status === 400) {
      console.error('Backend error:', error.response.data);
      showNotification('error', 'Lỗi', error.response.data || 'Không thể tải giỏ hàng');
    } else {
      showNotification('error', 'Lỗi', 'Không thể tải giỏ hàng');
    }
  } finally {
    isLoadingCart.value = false;
  }
};

// ✏️ Update quantity - CLEAN VERSION
const updateQuantity = async (cartItemId, newQuantity) => {
  if (newQuantity < 1) return;

  const item = cartItems.value.find(item => item.id === cartItemId);
  if (item && newQuantity > item.stock) {
    showNotification(
      'warning',
      'Vượt quá số lượng',
      `Số lượng không được vượt quá ${item.stock} sản phẩm có sẵn!`
    );
    return;
  }

  try {
    console.log(`🔄 Updating quantity for item ${cartItemId} to ${newQuantity}`);

    const response = await axios.put(`${API_BASE_URL}/api/gio-hang/update/${cartItemId}`, {
      soLuong: newQuantity
    }, {
      headers: {
        'Authorization': `Bearer ${getAuthToken()}`,
        'Content-Type': 'application/json'
      }
    });

    console.log('✅ Quantity updated:', response.data);

    // Update local state
    const updatedItem = response.data;
    cartItems.value = cartItems.value.map(item =>
      item.id === cartItemId ? {
        ...item,
        quantity: updatedItem.quantity,
        totalPrice: updatedItem.totalPrice
      } : item
    );

    showNotification('success', 'Cập nhật thành công', 'Đã cập nhật số lượng sản phẩm');
    window.dispatchEvent(new CustomEvent('cartUpdated'));

  } catch (error) {
    console.error('❌ Error updating quantity:', error);
    showNotification('error', 'Lỗi', 'Không thể cập nhật số lượng');
  }
};

// 🗑️ Remove item - CLEAN VERSION
const removeItem = async (cartItemId) => {
  const item = cartItems.value.find(item => item.id === cartItemId);
  if (!confirm(`Bạn có chắc chắn muốn xóa "${item?.name || 'sản phẩm này'}"?`)) return;

  try {
    console.log(`🔄 Removing item ${cartItemId}`);

    await axios.delete(`${API_BASE_URL}/api/gio-hang/remove/${cartItemId}`, {
      headers: {
        'Authorization': `Bearer ${getAuthToken()}`,
        'Content-Type': 'application/json'
      }
    });

    console.log('✅ Item removed from backend');

    // Update local state
    cartItems.value = cartItems.value.filter(item => item.id !== cartItemId);

    showNotification('success', 'Đã xóa sản phẩm', `"${item?.name}" đã được xóa khỏi giỏ hàng`);
    window.dispatchEvent(new CustomEvent('cartUpdated'));

  } catch (error) {
    console.error('❌ Error removing item:', error);
    showNotification('error', 'Lỗi', 'Không thể xóa sản phẩm');
  }
};

// 🧹 Clear cart - CLEAN VERSION
const clearCart = async () => {
  if (!confirm('Bạn có chắc chắn muốn xóa tất cả sản phẩm trong giỏ hàng?')) return;

  try {
    console.log('🔄 Clearing cart...');

    await axios.delete(`${API_BASE_URL}/api/gio-hang/clear`, {
      headers: {
        'Authorization': `Bearer ${getAuthToken()}`,
        'Content-Type': 'application/json'
      }
    });

    console.log('✅ Cart cleared from backend');

    const itemCount = cartItems.value.length;
    cartItems.value = [];

    showNotification('success', 'Đã xóa giỏ hàng', `Đã xóa ${itemCount} sản phẩm khỏi giỏ hàng`);
    window.dispatchEvent(new CustomEvent('cartUpdated'));

  } catch (error) {
    console.error('❌ Error clearing cart:', error);
    showNotification('error', 'Lỗi', 'Không thể xóa giỏ hàng');
  }
};

// Notification system
const notification = ref({
  show: false,
  type: 'success',
  title: '',
  message: '',
  duration: 3000
});

const showNotification = (type, title, message, duration = 3000) => {
  notification.value = {
    show: true,
    type,
    title,
    message,
    duration
  };

  setTimeout(() => {
    hideNotification();
  }, duration);
};

const hideNotification = () => {
  notification.value.show = false;
};

// Navigation functions
const continueShopping = () => {
  window.location.href = '/products';
};

const proceedToCheckout = () => {
  if (cartItems.value.length === 0) {
    showNotification(
      'warning',
      'Giỏ hàng trống',
      'Vui lòng thêm sản phẩm trước khi thanh toán'
    );
    return;
  }
  window.location.href = '/checkout';
};

// Handle image loading error
const handleImageError = (event, fallbackSrc = '/placeholder-shoe.png') => {
  if (event.target.src !== fallbackSrc) {
    event.target.src = fallbackSrc;
  } else {
    event.target.style.display = 'none';
    const placeholder = event.target.parentElement;
    if (placeholder) {
      placeholder.innerHTML = `
        <div class="w-full h-full flex items-center justify-center bg-gray-100 text-gray-400">
          <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24">
            <path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/>
          </svg>
        </div>
      `;
    }
  }
};

// Computed properties
const subtotal = computed(() => {
  return cartItems.value.reduce((sum, item) => sum + (item.price * item.quantity), 0);
});

const shippingFee = computed(() => {
  return subtotal.value >= 300000 ? 0 : 30000;
});

const total = computed(() => {
  return Math.max(0, subtotal.value + shippingFee.value);
});

const totalQuantity = computed(() => {
  return cartItems.value.reduce((sum, item) => sum + item.quantity, 0);
});

// Utility functions
const formatCurrency = (amount) => {
  return new Intl.NumberFormat('vi-VN').format(amount);
};

// Listen for cart updates from other components
const handleCartUpdated = () => {
  console.log('🔄 Cart updated event received, reloading...');
  loadCartFromBackend();
};

// Check auth and redirect if needed
const checkAuth = () => {
  if (!getAuthToken() || !getUserId()) {
    showNotification('error', 'Chưa đăng nhập', 'Vui lòng đăng nhập để xem giỏ hàng');
    setTimeout(() => {
      window.location.href = '/auth/login';
    }, 2000);
    return false;
  }
  return true;
};

// Lifecycle hooks
onMounted(() => {
  console.log('🚀 Cart component mounted');

  if (checkAuth()) {
    loadCartFromBackend();
  }

  // Listen for cart updates
  window.addEventListener('cartUpdated', handleCartUpdated);
});

onUnmounted(() => {
  window.removeEventListener('cartUpdated', handleCartUpdated);
});
</script>

<template>
  <!-- Notification -->
  <Transition name="slide-fade">
    <div v-if="notification.show"
         :class="[
           'fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg max-w-sm',
           notification.type === 'success' ? 'bg-green-500 text-white' :
           notification.type === 'warning' ? 'bg-yellow-500 text-white' :
           notification.type === 'info' ? 'bg-blue-500 text-white' :
           'bg-red-500 text-white'
         ]">
      <h4 class="font-bold">{{ notification.title }}</h4>
      <p class="text-sm">{{ notification.message }}</p>
    </div>
  </Transition>

  <div class="w-full mx-auto p-4 sm:p-6 bg-gray-50 min-h-screen">
    <div class="bg-white rounded-lg shadow-lg overflow-hidden">
      <!-- Header -->
      <div class="border-b border-gray-200 p-4 sm:p-6">
        <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4">
          <div class="flex items-center gap-3">
            <div class="w-8 h-8 text-orange-500 text-2xl">🛒</div>
            <h1 class="text-2xl sm:text-3xl font-bold text-gray-800">Giỏ hàng của bạn</h1>
          </div>
          <div class="flex items-center gap-4">
            <span class="text-gray-600">
              <span class="font-semibold">{{ cartItems.length }}</span> sản phẩm
              <span class="text-sm">| {{ totalQuantity }} món</span>
            </span>
            <button
              v-if="cartItems.length > 0"
              @click="clearCart"
              class="text-red-500 hover:text-red-700 text-sm font-medium transition-colors"
            >
              Xóa tất cả
            </button>
          </div>
        </div>
      </div>

      <!-- Loading State -->
      <div v-if="isLoadingCart" class="text-center py-12">
        <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"></div>
        <p class="text-gray-600">Đang tải giỏ hàng...</p>
      </div>

      <div v-else class="flex flex-col lg:flex-row gap-6 p-4 sm:p-6">
        <!-- Cart Items -->
        <div class="flex-1">
          <!-- Empty Cart State -->
          <div v-if="cartItems.length === 0" class="text-center py-12 sm:py-20">
            <div class="text-6xl mb-4">🛒</div>
            <h3 class="text-xl font-medium text-gray-800 mb-2">Giỏ hàng trống</h3>
            <p class="text-gray-600 mb-6">Bạn chưa có sản phẩm nào trong giỏ hàng</p>
            <button
              @click="continueShopping"
              class="bg-orange-500 text-white px-6 py-3 rounded-lg hover:bg-orange-600 transition-colors font-medium"
            >
              Tiếp tục mua sắm
            </button>
          </div>

          <!-- Cart Items Header - Desktop only -->
          <div v-else class="hidden lg:block bg-gray-50 rounded-lg p-4 mb-4">
            <div class="grid grid-cols-13 gap-4 text-sm font-medium text-gray-600">
              <div class="col-span-1">Hình ảnh</div>
              <div class="col-span-3">Tên sản phẩm</div>
              <div class="col-span-2">Mã hàng</div>
              <div class="col-span-2">Số lượng</div>
              <div class="col-span-2">Đơn giá</div>
              <div class="col-span-2">Thành tiền</div>
              <div class="col-span-1">Thao tác</div>
            </div>
          </div>

          <!-- Cart Items List -->
          <div class="space-y-4">
            <div
              v-for="item in cartItems"
              :key="item.id"
              class="bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-all duration-200 cart-item"
            >
              <!-- Desktop Layout -->
              <div class="hidden lg:grid grid-cols-13 gap-4 items-center">
                <!-- Product Image -->
                <div class="col-span-1">
                  <div class="w-20 h-20 bg-gray-100 rounded-lg flex items-center justify-center overflow-hidden">
                    <img
                      :src="item.image"
                      :alt="item.name"
                      class="w-full h-full object-cover rounded-lg"
                      @error="handleImageError"
                    />
                  </div>
                </div>

                <!-- Product Info -->
                <div class="col-span-3">
                  <h3 class="font-medium text-gray-800 mb-1 line-clamp-2 text-sm">{{ item.name }}</h3>
                  <div class="flex flex-wrap gap-1 text-xs text-gray-500 mb-1">
                    <span v-if="item.size" class="bg-gray-100 px-2 py-1 rounded">
                      Size: {{ item.size }}
                    </span>
                    <span v-if="item.color?.name" class="bg-gray-100 px-2 py-1 rounded flex items-center gap-1">
                      <div
                        class="w-2 h-2 rounded-full border border-gray-300"
                        :style="{ backgroundColor: getColorHex(item.color.name) }"
                      ></div>
                      {{ item.color.name }}
                    </span>
                  </div>
                  <p class="text-xs text-green-600">Điểm: +{{ item.points }}</p>
                  <p class="text-xs text-gray-500">Kho: {{ item.stock }}</p>
                </div>

                <!-- Product Code -->
                <div class="col-span-2">
                  <div class="text-gray-600 font-mono text-xs break-all">{{ item.code }}</div>
                </div>

                <!-- Quantity Controls -->
                <div class="col-span-2">
                  <div class="space-y-2">
                    <div class="flex border rounded-md overflow-hidden bg-white max-w-40">
                      <button
                        @click="updateQuantity(item.id, item.quantity - 1)"
                        class="w-8 h-8 flex items-center justify-center hover:bg-gray-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-lg font-bold"
                        :disabled="item.quantity <= 1"
                      >
                        −
                      </button>
                      <input
                        type="number"
                        :value="item.quantity"
                        @input="updateQuantity(item.id, parseInt($event.target.value) || 1)"
                        class="w-16 h-8 text-center border-x text-sm focus:outline-none focus:bg-blue-50"
                        min="1"
                        :max="item.stock"
                      />
                      <button
                        @click="updateQuantity(item.id, item.quantity + 1)"
                        class="w-8 h-8 flex items-center justify-center hover:bg-gray-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-lg font-bold"
                        :disabled="item.quantity >= item.stock"
                      >
                        +
                      </button>
                    </div>
                    <div class="text-xs text-gray-500">
                      {{ item.quantity }} / {{ item.stock }}
                    </div>
                  </div>
                </div>

                <!-- Unit Price -->
                <div class="col-span-2">
                  <div class="font-medium text-gray-800 text-sm">
                    {{ formatCurrency(item.price) }}đ
                  </div>
                  <div class="text-xs text-gray-500">đơn giá</div>
                </div>

                <!-- Total Price -->
                <div class="col-span-2">
                  <div class="font-bold text-orange-600 text-base">
                    {{ formatCurrency(item.price * item.quantity) }}đ
                  </div>
                  <div class="text-xs text-gray-500">{{ item.quantity }} x {{ formatCurrency(item.price) }}đ</div>
                </div>

                <!-- Actions -->
                <div class="col-span-1">
                  <div class="flex flex-col gap-2 items-center">
                    <button
                      @click="refreshItem(item.id)"
                      class="px-3 py-1 bg-blue-500 hover:bg-blue-600 text-white rounded text-xs font-medium transition-colors"
                      title="Reset về 1"
                    >
                      Reset
                    </button>
                    <button
                      @click="removeItem(item.id)"
                      class="px-3 py-1 bg-red-500 hover:bg-red-600 text-white rounded text-xs font-medium transition-colors"
                      title="Xóa sản phẩm"
                    >
                      Xóa
                    </button>
                  </div>
                </div>
              </div>

              <!-- Mobile Layout -->
              <div class="lg:hidden">
                <div class="flex gap-4">
                  <!-- Product Image -->
                  <div class="w-20 h-20 bg-gray-100 rounded-lg flex items-center justify-center overflow-hidden flex-shrink-0">
                    <img
                      :src="item.image"
                      :alt="item.name"
                      class="w-full h-full object-cover rounded-lg"
                      @error="handleImageError"
                    />
                  </div>

                  <!-- Product Info -->
                  <div class="flex-1">
                    <h3 class="font-medium text-gray-800 mb-2">{{ item.name }}</h3>
                    <div class="flex flex-wrap gap-2 text-sm text-gray-500 mb-2">
                      <span v-if="item.size" class="bg-gray-100 px-2 py-1 rounded text-xs">
                        Size: {{ item.size }}
                      </span>
                      <span v-if="item.color?.name" class="bg-gray-100 px-2 py-1 rounded flex items-center gap-1 text-xs">
                        <div
                          class="w-3 h-3 rounded-full border border-gray-300"
                          :style="{ backgroundColor: getColorHex(item.color.name) }"
                        ></div>
                        {{ item.color.name }}
                      </span>
                    </div>
                    <p class="text-xs text-gray-500 mb-1">Mã: {{ item.code }}</p>
                    <p class="text-xs text-green-600">Điểm thưởng: +{{ item.points }}</p>
                  </div>

                  <!-- Actions -->
                  <div class="flex flex-col gap-1">
                    <button
                      @click="refreshItem(item.id)"
                      class="px-2 py-1 bg-blue-500 hover:bg-blue-600 text-white rounded text-xs"
                      title="Reset về 1"
                    >
                      Reset
                    </button>
                    <button
                      @click="removeItem(item.id)"
                      class="px-2 py-1 bg-red-500 hover:bg-red-600 text-white rounded text-xs"
                      title="Xóa sản phẩm"
                    >
                      Xóa
                    </button>
                  </div>
                </div>

                <!-- Mobile Quantity and Price -->
                <div class="mt-4 space-y-3">
                  <div class="flex items-center justify-between">
                    <span class="text-sm text-gray-600">Số lượng:</span>
                    <div class="flex items-center gap-3">
                      <div class="flex border rounded-lg overflow-hidden bg-white">
                        <button
                          @click="updateQuantity(item.id, item.quantity - 1)"
                          class="p-2 hover:bg-gray-100 transition-colors disabled:opacity-50 text-lg font-bold"
                          :disabled="item.quantity <= 1"
                        >
                          −
                        </button>
                        <input
                          type="number"
                          :value="item.quantity"
                          @input="updateQuantity(item.id, parseInt($event.target.value) || 1)"
                          class="w-12 text-center border-x py-2 text-sm focus:outline-none focus:bg-blue-50"
                          min="1"
                          :max="item.stock"
                        />
                        <button
                          @click="updateQuantity(item.id, item.quantity + 1)"
                          class="p-2 hover:bg-gray-100 transition-colors disabled:opacity-50 text-lg font-bold"
                          :disabled="item.quantity >= item.stock"
                        >
                          +
                        </button>
                      </div>
                      <span class="text-xs text-gray-400">/ {{ item.stock }}</span>
                    </div>
                  </div>

                  <div class="flex justify-between">
                    <div class="text-left">
                      <div class="text-sm text-gray-600">Đơn giá:</div>
                      <div class="font-medium text-gray-800">{{ formatCurrency(item.price) }}đ</div>
                    </div>
                    <div class="text-right">
                      <div class="text-sm text-gray-600">Thành tiền:</div>
                      <div class="font-bold text-orange-600 text-lg">{{ formatCurrency(item.price * item.quantity) }}đ</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Order Summary -->
        <div class="w-full lg:w-96" v-if="cartItems.length > 0">
          <div class="bg-white border rounded-lg p-6 sticky top-6">
            <h3 class="font-bold text-lg text-gray-800 mb-4">📋 Tóm tắt đơn hàng</h3>

            <div class="space-y-3 mb-4">
              <div class="flex justify-between">
                <span class="text-gray-600">Tạm tính ({{ totalQuantity }} món):</span>
                <span class="font-medium">{{ formatCurrency(subtotal) }}đ</span>
              </div>

              <div class="flex justify-between">
                <span class="text-gray-600">🚚 Phí vận chuyển:</span>
                <span class="font-medium" :class="shippingFee === 0 ? 'text-green-600' : ''">
                  {{ shippingFee === 0 ? 'Miễn phí' : formatCurrency(shippingFee) + 'đ' }}
                </span>
              </div>

              <div v-if="subtotal < 300000 && subtotal > 0" class="text-xs text-orange-600 bg-orange-50 p-3 rounded">
                🎁 Thêm {{ formatCurrency(300000 - subtotal) }}đ để được <strong>miễn phí vận chuyển</strong>
              </div>
            </div>

            <hr class="my-4" />

            <div class="flex justify-between text-xl font-bold mb-6">
              <span>💳 Tổng cộng:</span>
              <span class="text-orange-600">{{ formatCurrency(total) }}đ</span>
            </div>

            <div class="space-y-3">
              <button
                @click="proceedToCheckout"
                class="w-full bg-red-600 text-white py-4 rounded-lg font-bold hover:bg-red-700 transition-colors text-lg"
              >
                🛒 THANH TOÁN NGAY
              </button>

              <button
                @click="continueShopping"
                class="w-full border-2 border-gray-300 text-gray-700 py-3 rounded-lg font-medium hover:border-gray-400 transition-colors"
              >
                🛍️ TIẾP TỤC MUA SẮM
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<style scoped>
.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.slide-fade-enter-active {
  transition: all 0.3s ease-out;
}

.slide-fade-leave-active {
  transition: all 0.3s ease-in;
}

.slide-fade-enter-from {
  transform: translateX(20px);
  opacity: 0;
}

.slide-fade-leave-to {
  transform: translateX(20px);
  opacity: 0;
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.cart-item {
  animation: slideIn 0.3s ease-out;
}

.cart-item:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 6px;
}

::-webkit-scrollbar-track {
  background: #f1f1f1;
  border-radius: 10px;
}

::-webkit-scrollbar-thumb {
  background: #c1c1c1;
  border-radius: 10px;
}

::-webkit-scrollbar-thumb:hover {
  background: #a8a8a8;
}

/* Fixed width for action buttons */
.cart-item button {
  flex-shrink: 0;
}

/* Quantity input styling */
.cart-item input[type="number"]::-webkit-outer-spin-button,
.cart-item input[type="number"]::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

.cart-item input[type="number"] {
  -moz-appearance: textfield;
}

/* Better text wrapping */
.break-all {
  word-break: break-all;
}

/* Grid layout for desktop - 13 columns */
.grid-cols-13 {
  grid-template-columns: repeat(13, 1fr);
}
</style>
